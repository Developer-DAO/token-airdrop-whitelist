# DevCoin

Allow holders of an NFT to claim tokens in an airdrop.

The NFT holders are leaves of a merkle tree, with one proof per address of NFT holder.

## Quickstart:

- `npm run snapshot:nft`
- `npm run generate:proofs`
- `npm run build`
- `npm test`

Web page to get proof for your address is in web/

## Diagram

<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="589px" preserveAspectRatio="none" style="width:641px;height:589px;background:#FFFFFF;" version="1.1" viewBox="0 0 641 589" width="641px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tc1ex1bu45hp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="30" y1="88.4883" y2="395.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="30" x2="30" y1="395.2832" y2="436.2383"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="30" y1="436.2383" y2="504.8594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="105" x2="105" y1="88.4883" y2="395.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="105" x2="105" y1="395.2832" y2="436.2383"/><line style="stroke:#A80036;stroke-width:1.0;" x1="105" x2="105" y1="436.2383" y2="504.8594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="88.4883" y2="395.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="188" x2="188" y1="395.2832" y2="436.2383"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="188" y1="436.2383" y2="504.8594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="266" y1="88.4883" y2="395.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="266" x2="266" y1="395.2832" y2="436.2383"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="266" y1="436.2383" y2="504.8594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="423.5" x2="423.5" y1="88.4883" y2="395.2832"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="423.5" x2="423.5" y1="395.2832" y2="436.2383"/><line style="stroke:#A80036;stroke-width:1.0;" x1="423.5" x2="423.5" y1="436.2383" y2="504.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="5" y="85.5352">Owner</text><ellipse cx="30.5" cy="15" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M30.5,23 L30.5,50 M17.5,31 L43.5,31 M30.5,50 L17.5,65 M30.5,50 L43.5,65 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="5" y="517.3945">Owner</text><ellipse cx="30.5" cy="530.3477" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M30.5,538.3477 L30.5,565.3477 M17.5,546.3477 L43.5,546.3477 M30.5,565.3477 L17.5,580.3477 M30.5,565.3477 L43.5,580.3477 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="74" x="66" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="73" y="73.5352">Treasury</text><rect fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="74" x="66" y="503.8594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="73" y="524.3945">Treasury</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="154" y="85.5352">Claimer1</text><ellipse cx="188" cy="15" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M188,23 L188,50 M175,31 L201,31 M188,50 L175,65 M188,50 L201,65 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="154" y="517.3945">Claimer1</text><ellipse cx="188" cy="530.3477" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M188,538.3477 L188,565.3477 M175,546.3477 L201,546.3477 M188,565.3477 L175,580.3477 M188,565.3477 L201,580.3477 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="232" y="85.5352">Claimer2</text><ellipse cx="266" cy="15" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M266,23 L266,50 M253,31 L279,31 M266,50 L253,65 M266,50 L279,65 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="232" y="517.3945">Claimer2</text><ellipse cx="266" cy="530.3477" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M266,538.3477 L266,565.3477 M253,546.3477 L279,546.3477 M266,565.3477 L253,580.3477 M266,565.3477 L279,580.3477 " fill="none" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="391.5" y="85.5352">Contract</text><ellipse cx="424" cy="56" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="412" x2="436" y1="70" y2="70"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="391.5" y="517.3945">Contract</text><ellipse cx="424" cy="536.3477" fill="#FEFECE" filter="url(#f1tc1ex1bu45hp)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="412" x2="436" y1="550.3477" y2="550.3477"/><path d="M149,103.4883 L149,128.4883 L223,128.4883 L223,113.4883 L213,103.4883 L149,103.4883 " fill="#FBFB77" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M213,103.4883 L213,113.4883 L223,113.4883 L213,103.4883 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="155" y="121.0566">Has NFT</text><path d="M234,142.7988 L234,167.7988 L294,167.7988 L294,152.7988 L284,142.7988 L234,142.7988 " fill="#FBFB77" filter="url(#f1tc1ex1bu45hp)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M284,142.7988 L284,152.7988 L294,152.7988 L284,142.7988 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="240" y="160.3672">Rando</text><polygon fill="#A80036" points="412,194.4199,422,198.4199,412,202.4199,416,198.4199" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="418" y1="198.4199" y2="198.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="37.5" y="193.6777">Deploy</text><ellipse cx="423.5" cy="239.9805" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="424" x2="466" y1="227.7305" y2="227.7305"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="466" x2="466" y1="227.7305" y2="240.7305"/><line style="stroke:#A80036;stroke-width:1.0;fill:none;" x1="429" x2="466" y1="240.7305" y2="240.7305"/><polygon fill="#A80036" points="439,236.7305,429,240.7305,439,244.7305,435,240.7305" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="431" y="222.9883">Mint tokens reserved for airdrop</text><ellipse cx="104.5" cy="269.291" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="121.5,266.041,111.5,270.041,121.5,274.041,117.5,270.041" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="119.5" x2="423" y1="270.041" y2="270.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="122" y="265.2988">Mint remaining tokens</text><polygon fill="#A80036" points="412,295.3516,422,299.3516,412,303.3516,416,299.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="418" y1="299.3516" y2="299.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="195" y="294.6094">Claim with proof</text><ellipse cx="187.5" cy="327.9121" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="204.5,324.6621,194.5,328.6621,204.5,332.6621,200.5,328.6621" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="202.5" x2="423" y1="328.6621" y2="328.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="205" y="323.9199">Send airdrop tokens</text><line style="stroke:#A80036;stroke-width:2.0;" x1="406" x2="416" y1="352.9727" y2="362.9727"/><line style="stroke:#A80036;stroke-width:2.0;" x1="406" x2="416" y1="362.9727" y2="352.9727"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188" x2="411" y1="357.9727" y2="357.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="195" y="353.2305">Claim with proof again (rejected)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="406" x2="416" y1="382.2832" y2="392.2832"/><line style="stroke:#A80036;stroke-width:2.0;" x1="406" x2="416" y1="392.2832" y2="382.2832"/><line style="stroke:#A80036;stroke-width:1.0;" x1="266" x2="411" y1="387.2832" y2="387.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="273" y="382.541">Claim without proof</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="109" x="172.75" y="419.918">Airdrop period ends</text><polygon fill="#A80036" points="412,453.5488,422,457.5488,412,461.5488,416,457.5488" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30.5" x2="418" y1="457.5488" y2="457.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="37.5" y="452.8066">sweep()</text><ellipse cx="104.5" cy="486.1094" rx="4" ry="4" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><polygon fill="#A80036" points="121.5,482.8594,111.5,486.8594,121.5,490.8594,117.5,486.8594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="119.5" x2="423" y1="486.8594" y2="486.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="122" y="482.1172">Remaining airdrop tokens collected to treasury</text></g></svg>

# Advanced Sample Hardhat Project

This project demonstrates an advanced Hardhat use case, integrating other tools commonly used alongside Hardhat in the ecosystem.

The project comes with a sample contract, a test for that contract, a sample script that deploys that contract, and an example of a task implementation, which simply lists the available accounts. It also comes with a variety of other tools, preconfigured to work with the project code.

Try running some of the following tasks:

```shell
npx hardhat accounts
npx hardhat compile
npx hardhat clean
npx hardhat test
npx hardhat node
npx hardhat help
REPORT_GAS=true npx hardhat test
npx hardhat coverage
npx hardhat run scripts/deploy.ts
TS_NODE_FILES=true npx ts-node scripts/deploy.ts
npx eslint '**/*.{js,ts}'
npx eslint '**/*.{js,ts}' --fix
npx prettier '**/*.{json,sol,md}' --check
npx prettier '**/*.{json,sol,md}' --write
npx solhint 'contracts/**/*.sol'
npx solhint 'contracts/**/*.sol' --fix
```

# Etherscan verification

To try out Etherscan verification, you first need to deploy a contract to an Ethereum network that's supported by Etherscan, such as Ropsten.

In this project, copy the .env.example file to a file named .env, and then edit it to fill in the details. Enter your Etherscan API key, your Ropsten node URL (eg from Alchemy), and the private key of the account which will send the deployment transaction. With a valid .env file in place, first deploy your contract:

```shell
hardhat run --network ropsten scripts/sample-script.ts
```

Then, copy the deployment address and paste it in to replace `DEPLOYED_CONTRACT_ADDRESS` in this command:

```shell
npx hardhat verify --network ropsten DEPLOYED_CONTRACT_ADDRESS "Hello, Hardhat!"
```

# Performance optimizations

For faster runs of your tests and scripts, consider skipping ts-node's type checking by setting the environment variable `TS_NODE_TRANSPILE_ONLY` to `1` in hardhat's environment. For more details see [the documentation](https://hardhat.org/guides/typescript.html#performance-optimizations).
